{"ast":null,"code":"var _jsxFileName = \"/workspaces/StudBuds/frontend/src/components/Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { getAuth, createUserWithEmailAndPassword } from 'firebase/auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Signup({\n  setUserId\n}) {\n  _s();\n  const [formData, setFormData] = useState({\n    email: '',\n    password: ''\n  });\n  const [message, setMessage] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const navigate = useNavigate();\n  const auth = getAuth();\n  const isMounted = useRef(true);\n  useEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setMessage('');\n    setIsSubmitting(true);\n\n    // Validate email domain before creating the account\n    if (!formData.email.endsWith('@cooper.edu')) {\n      setMessage('Please sign up with your @cooper.edu email address.');\n      setIsSubmitting(false);\n      return;\n    }\n    try {\n      // Create the Firebase account\n      const userCredential = await createUserWithEmailAndPassword(auth, formData.email, formData.password);\n      const token = await userCredential.user.getIdToken();\n\n      // Call your backend API to add the user to the local DB\n      const response = await axios.post('/api/auth/signup', {\n        firebaseToken: token\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (response.data && response.data.userId) {\n        setUserId(response.data.userId);\n        navigate('/matchlist');\n      } else {\n        if (isMounted.current) setMessage('Sign up failed on local DB');\n      }\n    } catch (error) {\n      if (isMounted.current) {\n        var _error$response;\n        setMessage(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message || 'Sign up failed');\n      }\n    } finally {\n      if (isMounted.current) setIsSubmitting(false);\n    }\n  };\n\n  // Your styles remain similar\n  const styles = {\n    container: {\n      maxWidth: '400px',\n      margin: '3rem auto',\n      padding: '2rem',\n      borderRadius: '12px',\n      backgroundColor: '#ffffff',\n      boxShadow: '0 6px 12px rgba(0,0,0,0.1)',\n      textAlign: 'center'\n    },\n    heading: {\n      color: '#2c6e6a',\n      marginBottom: '1.5rem'\n    },\n    input: {\n      width: '100%',\n      padding: '12px',\n      margin: '0.5rem 0',\n      borderRadius: '20px',\n      border: '1px solid #ccc',\n      boxSizing: 'border-box',\n      outline: 'none',\n      fontSize: '1rem'\n    },\n    button: {\n      width: '100%',\n      padding: '12px',\n      marginTop: '1rem',\n      borderRadius: '20px',\n      border: 'none',\n      backgroundColor: '#5ccdc1',\n      color: '#fff',\n      fontSize: '1rem',\n      cursor: 'pointer',\n      transition: 'background-color 0.3s ease'\n    },\n    buttonDisabled: {\n      backgroundColor: '#9de0da',\n      cursor: 'not-allowed'\n    },\n    message: {\n      color: 'blue',\n      textAlign: 'center',\n      marginTop: '1rem'\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: styles.heading,\n      children: \"Sign Up for StudBuds\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        style: styles.input,\n        type: \"email\",\n        name: \"email\",\n        placeholder: \"Email (@cooper.edu)\",\n        onChange: handleChange,\n        value: formData.email,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        style: styles.input,\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"Password\",\n        onChange: handleChange,\n        value: formData.password,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        style: {\n          ...styles.button,\n          ...(isSubmitting ? styles.buttonDisabled : {})\n        },\n        disabled: isSubmitting,\n        children: isSubmitting ? 'Signing Up...' : 'Sign Up'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: styles.message,\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n_s(Signup, \"1CzucsJE7UsXSxZkYymEYaHns+o=\", false, function () {\n  return [useNavigate];\n});\n_c = Signup;\nexport default Signup;\nvar _c;\n$RefreshReg$(_c, \"Signup\");","map":{"version":3,"names":["React","useState","useRef","useEffect","axios","useNavigate","getAuth","createUserWithEmailAndPassword","jsxDEV","_jsxDEV","Signup","setUserId","_s","formData","setFormData","email","password","message","setMessage","isSubmitting","setIsSubmitting","navigate","auth","isMounted","current","handleChange","e","target","name","value","handleSubmit","preventDefault","endsWith","userCredential","token","user","getIdToken","response","post","firebaseToken","headers","data","userId","error","_error$response","styles","container","maxWidth","margin","padding","borderRadius","backgroundColor","boxShadow","textAlign","heading","color","marginBottom","input","width","border","boxSizing","outline","fontSize","button","marginTop","cursor","transition","buttonDisabled","style","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","onChange","required","disabled","_c","$RefreshReg$"],"sources":["/workspaces/StudBuds/frontend/src/components/Login.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { getAuth, createUserWithEmailAndPassword } from 'firebase/auth';\n\nfunction Signup({ setUserId }) {\n  const [formData, setFormData] = useState({ email: '', password: '' });\n  const [message, setMessage] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const navigate = useNavigate();\n  const auth = getAuth();\n  const isMounted = useRef(true);\n\n  useEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setMessage('');\n    setIsSubmitting(true);\n\n    // Validate email domain before creating the account\n    if (!formData.email.endsWith('@cooper.edu')) {\n      setMessage('Please sign up with your @cooper.edu email address.');\n      setIsSubmitting(false);\n      return;\n    }\n\n    try {\n      // Create the Firebase account\n      const userCredential = await createUserWithEmailAndPassword(auth, formData.email, formData.password);\n      const token = await userCredential.user.getIdToken();\n\n      // Call your backend API to add the user to the local DB\n      const response = await axios.post(\n        '/api/auth/signup',\n        { firebaseToken: token },\n        { headers: { 'Authorization': `Bearer ${token}` } }\n      );\n\n      if (response.data && response.data.userId) {\n        setUserId(response.data.userId);\n        navigate('/matchlist');\n      } else {\n        if (isMounted.current) setMessage('Sign up failed on local DB');\n      }\n    } catch (error) {\n      if (isMounted.current) {\n        setMessage(error.response?.data || error.message || 'Sign up failed');\n      }\n    } finally {\n      if (isMounted.current) setIsSubmitting(false);\n    }\n  };\n\n  // Your styles remain similar\n  const styles = {\n    container: { maxWidth: '400px', margin: '3rem auto', padding: '2rem', borderRadius: '12px', backgroundColor: '#ffffff', boxShadow: '0 6px 12px rgba(0,0,0,0.1)', textAlign: 'center' },\n    heading: { color: '#2c6e6a', marginBottom: '1.5rem' },\n    input: { width: '100%', padding: '12px', margin: '0.5rem 0', borderRadius: '20px', border: '1px solid #ccc', boxSizing: 'border-box', outline: 'none', fontSize: '1rem' },\n    button: { width: '100%', padding: '12px', marginTop: '1rem', borderRadius: '20px', border: 'none', backgroundColor: '#5ccdc1', color: '#fff', fontSize: '1rem', cursor: 'pointer', transition: 'background-color 0.3s ease' },\n    buttonDisabled: { backgroundColor: '#9de0da', cursor: 'not-allowed' },\n    message: { color: 'blue', textAlign: 'center', marginTop: '1rem' },\n  };\n\n  return (\n    <div style={styles.container}>\n      <h2 style={styles.heading}>Sign Up for StudBuds</h2>\n      <form onSubmit={handleSubmit}>\n        <input\n          style={styles.input}\n          type=\"email\"\n          name=\"email\"\n          placeholder=\"Email (@cooper.edu)\"\n          onChange={handleChange}\n          value={formData.email}\n          required\n        />\n        <input\n          style={styles.input}\n          type=\"password\"\n          name=\"password\"\n          placeholder=\"Password\"\n          onChange={handleChange}\n          value={formData.password}\n          required\n        />\n        <button\n          type=\"submit\"\n          style={{ ...styles.button, ...(isSubmitting ? styles.buttonDisabled : {}) }}\n          disabled={isSubmitting}\n        >\n          {isSubmitting ? 'Signing Up...' : 'Sign Up'}\n        </button>\n      </form>\n      {message && <p style={styles.message}>{message}</p>}\n    </div>\n  );\n}\n\nexport default Signup;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}