{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';// Allowed majors.\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const allowedMajors=[\"Electrical Engineering\",\"Mechanical Engineering\",\"Chemical Engineering\",\"Civil Engineering\",\"General Engineering\",\"Computer Science\"];function Signup(_ref){let{setUserId}=_ref;const[formData,setFormData]=useState({name:'',email:'',password:'',major:'',year:''});const[message,setMessage]=useState('');const navigate=useNavigate();// Handle field changes.\nconst handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};// Validate year and major.\nconst validateForm=()=>{const year=parseInt(formData.year,10);if(isNaN(year)||year<2020||year>2050){setMessage(\"Year must be a number between 2020 and 2050.\");return false;}if(!allowedMajors.includes(formData.major)){setMessage(\"Please select a valid major.\");return false;}return true;};const handleSubmit=e=>{e.preventDefault();setMessage(\"\");if(!validateForm())return;axios.post('/api/auth/signup',formData).then(response=>{// Expect backend to return a success message.\nsetMessage(response.data);// Redirect user to login.\nnavigate('/login');}).catch(error=>{var _error$response;// Display error from backend.\nsetMessage(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||'Signup failed');});};return/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',marginTop:'2rem'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sign Up\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"Name\",onChange:handleChange,value:formData.name,required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Email (@cooper.edu)\",onChange:handleChange,value:formData.email,required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password (min 9 characters)\",onChange:handleChange,value:formData.password,required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"select\",{name:\"major\",value:formData.major,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Major\"}),allowedMajors.map((major,index)=>/*#__PURE__*/_jsx(\"option\",{value:major,children:major},index))]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"year\",placeholder:\"Year (2020-2050)\",onChange:handleChange,value:formData.year,min:\"2020\",max:\"2050\",required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Sign Up\"})]}),message&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:message})]});}export default Signup;","map":{"version":3,"names":["React","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","allowedMajors","Signup","_ref","setUserId","formData","setFormData","name","email","password","major","year","message","setMessage","navigate","handleChange","e","target","value","validateForm","parseInt","isNaN","includes","handleSubmit","preventDefault","post","then","response","data","catch","error","_error$response","style","textAlign","marginTop","children","onSubmit","type","placeholder","onChange","required","map","index","min","max","color"],"sources":["/workspaces/StudBuds/frontend/src/components/Signup.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\n\n// Allowed majors.\nconst allowedMajors = [\n  \"Electrical Engineering\",\n  \"Mechanical Engineering\",\n  \"Chemical Engineering\",\n  \"Civil Engineering\",\n  \"General Engineering\",\n  \"Computer Science\"\n];\n\nfunction Signup({ setUserId }) {\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    password: '',\n    major: '',\n    year: ''\n  });\n  const [message, setMessage] = useState('');\n  const navigate = useNavigate();\n\n  // Handle field changes.\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  // Validate year and major.\n  const validateForm = () => {\n    const year = parseInt(formData.year, 10);\n    if (isNaN(year) || year < 2020 || year > 2050) {\n      setMessage(\"Year must be a number between 2020 and 2050.\");\n      return false;\n    }\n    if (!allowedMajors.includes(formData.major)) {\n      setMessage(\"Please select a valid major.\");\n      return false;\n    }\n    return true;\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setMessage(\"\");\n    if (!validateForm()) return;\n    axios.post('/api/auth/signup', formData)\n      .then(response => {\n        // Expect backend to return a success message.\n        setMessage(response.data);\n        // Redirect user to login.\n        navigate('/login');\n      })\n      .catch(error => {\n        // Display error from backend.\n        setMessage(error.response?.data || 'Signup failed');\n      });\n  };\n\n  return (\n    <div style={{ textAlign: 'center', marginTop: '2rem' }}>\n      <h2>Sign Up</h2>\n      <form onSubmit={handleSubmit}>\n        <input \n          type=\"text\" \n          name=\"name\" \n          placeholder=\"Name\" \n          onChange={handleChange} \n          value={formData.name} \n          required \n        /><br/><br/>\n        <input \n          type=\"email\" \n          name=\"email\" \n          placeholder=\"Email (@cooper.edu)\" \n          onChange={handleChange} \n          value={formData.email} \n          required \n        /><br/><br/>\n        <input \n          type=\"password\" \n          name=\"password\" \n          placeholder=\"Password (min 9 characters)\" \n          onChange={handleChange} \n          value={formData.password} \n          required \n        /><br/><br/>\n        <select name=\"major\" value={formData.major} onChange={handleChange} required>\n          <option value=\"\">Select Major</option>\n          {allowedMajors.map((major, index) => (\n            <option key={index} value={major}>{major}</option>\n          ))}\n        </select><br/><br/>\n        <input \n          type=\"number\" \n          name=\"year\" \n          placeholder=\"Year (2020-2050)\" \n          onChange={handleChange} \n          value={formData.year} \n          min=\"2020\" \n          max=\"2050\" \n          required \n        /><br/><br/>\n        <button type=\"submit\">Sign Up</button>\n      </form>\n      {message && <p style={{ color: 'red' }}>{message}</p>}\n    </div>\n  );\n}\n\nexport default Signup;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}